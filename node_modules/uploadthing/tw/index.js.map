{"version":3,"file":"index.js","names":["twConfig: Config"],"sources":["../src/tw/plugin.ts","../src/tw/index.ts"],"sourcesContent":["import plugin from \"tailwindcss/plugin\";\n\n/**\n * UploadThing Tailwind plugin which injects custom variants\n * for the built-in UI components\n * @see https://docs.uploadthing.com/concepts/theming#theming-with-tailwind-css\n *\n * When using this, you need to specify `content` manually. For automatic\n * detection, see {@link withUt}.\n */\nexport const uploadthingPlugin = plugin(($) => {\n  // Variants to select specific underlying element\n  $.addVariant(\"ut-button\", '&>*[data-ut-element=\"button\"]');\n  $.addVariant(\"ut-allowed-content\", '&>*[data-ut-element=\"allowed-content\"]');\n  $.addVariant(\"ut-label\", '&>*[data-ut-element=\"label\"]');\n  $.addVariant(\"ut-upload-icon\", '&>*[data-ut-element=\"upload-icon\"]');\n  $.addVariant(\"ut-clear-btn\", '&>*[data-ut-element=\"clear-btn\"]');\n\n  // Variants to select specific state\n  $.addVariant(\"ut-readying\", '&[data-state=\"readying\"]');\n  $.addVariant(\"ut-ready\", '&[data-state=\"ready\"]');\n  $.addVariant(\"ut-uploading\", '&[data-state=\"uploading\"]');\n});\n","import { dirname, sep } from \"node:path\";\nimport type { Config } from \"tailwindcss\";\n\nimport { uploadthingPlugin } from \"./plugin\";\n\nexport { uploadthingPlugin };\n\n/**\n * Add more here when additional UI packages are added\n */\nconst PACKAGES = [\"react\", \"solid\", \"svelte\", \"vue\"];\n\n/**\n * HOF for Tailwind config that adds the\n * {@link uploadthingPlugin} to the Tailwind config\n * as well as adds content paths to detect the necessary\n * classnames\n */\nexport function withUt(twConfig: Config) {\n  const contentPaths = PACKAGES.map((pkg) => {\n    try {\n      const resolved = require.resolve(`@uploadthing/${pkg}`, {\n        paths: [...module.paths, process.cwd()],\n      });\n\n      return dirname(resolved) + sep + \"**\";\n    } catch {\n      return null;\n    }\n  }).filter((s) => s != null);\n\n  if (contentPaths.length === 0) {\n    // eslint-disable-next-line no-console\n    console.warn(`\n  [uploadthing]: Unable to resolve path for uploadthing UI packages. As a workaround, you can manually add the paths to your content paths: \n    - Find where your package manager has installed the distribution files, e.g. './node_modules/@uploadthing/react'.\n      Note: If you have a monorepo, you may need to look up the tree to find the correct path.\n    - Add the path to the 'content' field in your Tailwind configuration: \n      content: [\n        // your other content paths\n       './node_modules/@uploadthing/react/dist**' // <-- add this line\n      ]\n    `);\n  }\n\n  if (Array.isArray(twConfig.content)) {\n    twConfig.content.push(...contentPaths);\n  } else {\n    // content can be an object too with `files` property\n    twConfig.content.files.push(...contentPaths);\n  }\n\n  twConfig.plugins ??= [];\n  twConfig.plugins.push(uploadthingPlugin);\n\n  return twConfig;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;AAUA,MAAa,oBAAoB,OAAO,CAAC,MAAM;AAE7C,GAAE,WAAW,aAAa,kCAAgC;AAC1D,GAAE,WAAW,sBAAsB,2CAAyC;AAC5E,GAAE,WAAW,YAAY,iCAA+B;AACxD,GAAE,WAAW,kBAAkB,uCAAqC;AACpE,GAAE,WAAW,gBAAgB,qCAAmC;AAGhE,GAAE,WAAW,eAAe,6BAA2B;AACvD,GAAE,WAAW,YAAY,0BAAwB;AACjD,GAAE,WAAW,gBAAgB,8BAA4B;AAC1D,EAAC;;;;;;;ACZF,MAAM,WAAW;CAAC;CAAS;CAAS;CAAU;AAAM;;;;;;;AAQpD,SAAgB,OAAOA,UAAkB;CACvC,MAAM,eAAe,SAAS,IAAI,CAAC,QAAQ;AACzC,MAAI;GACF,MAAM,WAAW,UAAQ,SAAS,eAAe,IAAI,GAAG,EACtD,OAAO,CAAC,GAAG,OAAO,OAAO,QAAQ,KAAK,AAAC,EACxC,EAAC;AAEF,UAAO,QAAQ,SAAS,GAAG,MAAM;EAClC,QAAO;AACN,UAAO;EACR;CACF,EAAC,CAAC,OAAO,CAAC,MAAM,KAAK,KAAK;AAE3B,KAAI,aAAa,WAAW,EAE1B,SAAQ,MAAM;;;;;;;;;MASZ;AAGJ,KAAI,MAAM,QAAQ,SAAS,QAAQ,CACjC,UAAS,QAAQ,KAAK,GAAG,aAAa;KAGtC,UAAS,QAAQ,MAAM,KAAK,GAAG,aAAa;AAG9C,UAAS,YAAY,CAAE;AACvB,UAAS,QAAQ,KAAK,kBAAkB;AAExC,QAAO;AACR"}