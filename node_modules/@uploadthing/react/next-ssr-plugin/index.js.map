{"version":3,"file":"index.js","names":["props: { routerConfig: EndpointMetadata }"],"sources":["../src/next-ssr-plugin.tsx"],"sourcesContent":["\"use client\";\n\nimport { useId } from \"react\";\nimport { useServerInsertedHTML } from \"next/navigation\";\n\nimport type { EndpointMetadata } from \"@uploadthing/shared\";\n\ndeclare const globalThis: {\n  __UPLOADTHING?: EndpointMetadata;\n};\n\nexport function NextSSRPlugin(props: { routerConfig: EndpointMetadata }) {\n  const id = useId();\n\n  // Set routerConfig on server globalThis\n  globalThis.__UPLOADTHING = props.routerConfig;\n\n  useServerInsertedHTML(() => {\n    const html = [\n      // Hydrate routerConfig on client globalThis\n      `globalThis.__UPLOADTHING = ${JSON.stringify(props.routerConfig)};`,\n    ];\n\n    return (\n      <script key={id} dangerouslySetInnerHTML={{ __html: html.join(\"\") }} />\n    );\n  });\n\n  return null;\n}\n"],"mappings":";;;;;;;;AAWA,SAAgB,cAAcA,OAA2C;CACvE,MAAM,KAAK,OAAO;AAGlB,YAAW,gBAAgB,MAAM;AAEjC,uBAAsB,MAAM;EAC1B,MAAM,OAAO,EAEV,6BAA6B,KAAK,UAAU,MAAM,aAAa,CAAC,EAClE;AAED,yBACE,IAAC,YAAgB,yBAAyB,EAAE,QAAQ,KAAK,KAAK,GAAG,CAAE,KAAtD,GAA0D;CAE1E,EAAC;AAEF,QAAO;AACR"}