{"version":3,"file":"HttpApiBuilder.js","names":["Cause","Chunk","Context","Effect","Encoding","Fiber","constFalse","identity","globalValue","Layer","ManagedRuntime","Option","ParseResult","pipeArguments","Redacted","Schema","unify","HttpApi","HttpApiDecodeError","HttpApiMiddleware","HttpApiSchema","HttpApp","HttpMethod","HttpMiddleware","HttpRouter","HttpServer","HttpServerRequest","HttpServerResponse","OpenApi","UrlParams","Router","Tag","api","effect","Api","map","context","serve","middleware","httpApp","pipe","app","unwrapEffect","provide","Live","Middleware","layer","gen","makeMiddlewareMap","middlewares","router","applyMiddleware","apiMiddlewareService","apiMiddleware","retrieve","errorSchema","makeErrorSchema","encodeError","encodeUnknown","catchAllCause","cause","matchEffect","squash","onFailure","failCause","onSuccess","succeed","toWebHandler","options","runtime","make","mergeAll","memoMap","handlerCached","handlerPromise","rt","runtimeEffect","handler","toWebHandlerRuntime","runPromise","request","undefined","then","dispose","HandlersTypeId","Symbol","for","HandlersProto","_Endpoints","arguments","handle","name","endpoint","group","endpoints","makeHandlers","handlers","append","withFullRequest","uninterruptible","handleRaw","self","Object","create","groupName","build","use","groups","result","empty","isEffect","groupMiddleware","routes","item","push","handlerToRoute","mapInputContext","input","merge","concat","fromIterable","_api","_groupName","_name","f","requestPayload","urlParams","hasBody","method","contentType","headers","toLowerCase","trim","includes","orDie","json","multipart","urlParamsBody","toRecord","startsWith","text","arrayBuffer","buffer","Uint8Array","initial","Map","forEach","tag","set","key","unsafeGet","isSingleStringType","ast","_tag","ps","propertySignatures","find","type","indexSignatures","some","is","parameter","types","from","normalizeUrlParams","params","out","value","Array","isArray","endpoint_","isFullRequest","isMultipartStream","payloadSchema","getMultipartStream","getOrElse","decodePath","pathSchema","decodeUnknown","decodePayload","none","decodeHeaders","headersSchema","encodeSuccess","encode","makeSuccessSchema","successSchema","makeRoute","path","fiber","getOrThrow","getCurrentFiber","currentContext","httpRequest","routeContext","RouteContext","ParsedSearchParams","payload","flatMap","multipartStream","urlParamsSchema","schema","response","isServerResponse","catchIf","isParseError","refailParseError","entry","values","SecurityTypeId","makeSecurityMiddleware","optional","previous","provides","provideService","_","provideServiceEffect","zipRight","securityMiddlewareCache","WeakMap","has","get","security","entries","decode","securityDecode","catchAll","void","responseSchema","declare","schemas","Set","deunionize","Union","toResponseSuccess","toResponseError","decodeForbidden","__","fail","Forbidden","toResponseSchema","getStatus","cache","schemaToResponse","data","isEmpty","isVoid","to","status","encoding","getEncoding","kind","mapError","error","Type","uint8Array","transform","transformOrFail","getStatusSuccessAST","getStatusErrorAST","sync","of","add","prev","middlewareAdd","service","middlewareAddNoContext","args","apiFirst","isHttpApi","withContext","scopedDiscard","middlewareCors","cors","middlewareOpenApi","spec","fromApi","additionalPropertiesStrategy","bearerLen","length","basicLen","authorization","slice","in","Struct","String","schemaSearchParams","schemaCookies","schemaHeaders","match","username","password","decodeBase64String","header","parts","split","securitySetCookie","stringValue","appendPreResponseHandler","_req","setCookie","secure","httpOnly"],"sources":["../../src/HttpApiBuilder.ts"],"sourcesContent":[null],"mappings":"AAAA;;;AAGA,OAAO,KAAKA,KAAK,MAAM,cAAc;AACrC,OAAO,KAAKC,KAAK,MAAM,cAAc;AACrC,OAAO,KAAKC,OAAO,MAAM,gBAAgB;AACzC,OAAO,KAAKC,MAAM,MAAM,eAAe;AACvC,OAAO,KAAKC,QAAQ,MAAM,iBAAiB;AAC3C,OAAO,KAAKC,KAAK,MAAM,cAAc;AACrC,SAASC,UAAU,EAAEC,QAAQ,QAAQ,iBAAiB;AACtD,SAASC,WAAW,QAAQ,oBAAoB;AAChD,OAAO,KAAKC,KAAK,MAAM,cAAc;AACrC,OAAO,KAAKC,cAAc,MAAM,uBAAuB;AACvD,OAAO,KAAKC,MAAM,MAAM,eAAe;AACvC,OAAO,KAAKC,WAAW,MAAM,oBAAoB;AACjD,SAAwBC,aAAa,QAAQ,iBAAiB;AAE9D,OAAO,KAAKC,QAAQ,MAAM,iBAAiB;AAC3C,OAAO,KAAKC,MAAM,MAAM,eAAe;AAIvC,SAASC,KAAK,QAAQ,cAAc;AAGpC,OAAO,KAAKC,OAAO,MAAM,cAAc;AAEvC,SAASC,kBAAkB,QAAQ,mBAAmB;AAEtD,OAAO,KAAKC,iBAAiB,MAAM,wBAAwB;AAC3D,OAAO,KAAKC,aAAa,MAAM,oBAAoB;AAEnD,OAAO,KAAKC,OAAO,MAAM,cAAc;AACvC,OAAO,KAAKC,UAAU,MAAM,iBAAiB;AAC7C,OAAO,KAAKC,cAAc,MAAM,qBAAqB;AACrD,OAAO,KAAKC,UAAU,MAAM,iBAAiB;AAC7C,OAAO,KAAKC,UAAU,MAAM,iBAAiB;AAC7C,OAAO,KAAKC,iBAAiB,MAAM,wBAAwB;AAC3D,OAAO,KAAKC,kBAAkB,MAAM,yBAAyB;AAC7D,OAAO,KAAKC,OAAO,MAAM,cAAc;AAEvC,OAAO,KAAKC,SAAS,MAAM,gBAAgB;AAE3C;;;;;;AAMA,OAAM,MAAOC,MAAO,sBAAQN,UAAU,CAACO,GAAG,CAAC,wCAAwC,CAAC,EAAU;AAE9F;;;;;;AAMA,OAAO,MAAMC,GAAG,GACdA,GAAsC,IAMtCvB,KAAK,CAACwB,MAAM,CACVhB,OAAO,CAACiB,GAAG,EACX/B,MAAM,CAACgC,GAAG,CAAChC,MAAM,CAACiC,OAAO,EAAE,EAAGA,OAAO,KAAM;EAAEJ,GAAG,EAAEA,GAAU;EAAEI;AAAO,CAAE,CAAC,CAAC,CAC1E;AAEH;;;;;;;;;;AAUA,OAAO,MAAMC,KAAK,GAChBC,UAAoE,IASpEC,OAAO,CAACC,IAAI,CACVrC,MAAM,CAACgC,GAAG,CAAEM,GAAG,IAAKhB,UAAU,CAACY,KAAK,CAACI,GAAU,EAAEH,UAAW,CAAC,CAAC,EAC9D7B,KAAK,CAACiC,YAAY,EAClBjC,KAAK,CAACkC,OAAO,CAAC,CAACb,MAAM,CAACc,IAAI,EAAEC,UAAU,CAACC,KAAK,CAAC,CAAC,CAC/C;AAEH;;;;;;AAMA,OAAO,MAAMP,OAAO,gBAIhBpC,MAAM,CAAC4C,GAAG,CAAC,aAAS;EACtB,MAAM;IAAEf,GAAG;IAAEI;EAAO,CAAE,GAAG,OAAOnB,OAAO,CAACiB,GAAG;EAC3C,MAAMI,UAAU,GAAGU,iBAAiB,CAAChB,GAAG,CAACiB,WAAW,EAAEb,OAAO,CAAC;EAC9D,MAAMc,MAAM,GAAGC,eAAe,CAACb,UAAU,EAAE,OAAOR,MAAM,CAACoB,MAAM,CAAC;EAChE,MAAME,oBAAoB,GAAG,OAAOP,UAAU;EAC9C,MAAMQ,aAAa,GAAG,OAAOD,oBAAoB,CAACE,QAAQ;EAC1D,MAAMC,WAAW,GAAGC,eAAe,CAACxB,GAAU,CAAC;EAC/C,MAAMyB,WAAW,GAAG1C,MAAM,CAAC2C,aAAa,CAACH,WAAW,CAAC;EACrD,OAAOL,MAAM,CAACV,IAAI,CAChBa,aAAa,EACblD,MAAM,CAACwD,aAAa,CAAEC,KAAK,IACzBzD,MAAM,CAAC0D,WAAW,CAAC1D,MAAM,CAACwC,OAAO,CAACc,WAAW,CAACzD,KAAK,CAAC8D,MAAM,CAACF,KAAK,CAAC,CAAC,EAAExB,OAAO,CAAC,EAAE;IAC5E2B,SAAS,EAAEA,CAAA,KAAM5D,MAAM,CAAC6D,SAAS,CAACJ,KAAK,CAAC;IACxCK,SAAS,EAAE9D,MAAM,CAAC+D;GACnB,CAAC,CACH,CACK;AACV,CAAC,CAAC;AAEF;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,OAAO,MAAMC,YAAY,GAAGA,CAC1BrB,KAAgF,EAChFsB,OAQC,KAIC;EACF,MAAMC,OAAO,GAAG3D,cAAc,CAAC4D,IAAI,CACjC7D,KAAK,CAAC8D,QAAQ,CAACzB,KAAK,EAAEhB,MAAM,CAACc,IAAI,EAAEC,UAAU,CAACC,KAAK,CAAC,EACpDsB,OAAO,EAAEI,OAAO,CACjB;EACD,IAAIC,aAAkH;EACtH,MAAMC,cAAc,GAAGvE,MAAM,CAAC4C,GAAG,CAAC,aAAS;IACzC,MAAMN,GAAG,GAAG,OAAOF,OAAO;IAC1B,MAAMoC,EAAE,GAAG,OAAON,OAAO,CAACO,aAAa;IACvC,MAAMC,OAAO,GAAGxD,OAAO,CAACyD,mBAAmB,CAACH,EAAE,CAAC,CAACP,OAAO,EAAE9B,UAAU,GAAG8B,OAAO,CAAC9B,UAAU,CAACG,GAAU,CAAQ,GAAGA,GAAG,CAAC;IAClHgC,aAAa,GAAGI,OAAO;IACvB,OAAOA,OAAO;EAChB,CAAC,CAAC,CAACrC,IAAI,CAAC6B,OAAO,CAACU,UAAU,CAAC;EAC3B,SAASF,OAAOA,CAACG,OAAgB,EAAE5C,OAA4C;IAC7E,IAAIqC,aAAa,KAAKQ,SAAS,EAAE;MAC/B,OAAOR,aAAa,CAACO,OAAO,EAAE5C,OAAO,CAAC;IACxC;IACA,OAAOsC,cAAc,CAACQ,IAAI,CAAEL,OAAO,IAAKA,OAAO,CAACG,OAAO,EAAE5C,OAAO,CAAC,CAAC;EACpE;EACA,OAAO;IAAEyC,OAAO;IAAEM,OAAO,EAAEd,OAAO,CAACc;EAAO,CAAW;AACvD,CAAC;AAED;;;;AAIA,OAAO,MAAMC,cAAc,gBAAkBC,MAAM,CAACC,GAAG,CAAC,0CAA0C,CAAC;AAuLnG,MAAMC,aAAa,GAAG;EACpB,CAACH,cAAc,GAAG;IAChBI,UAAU,EAAEjF;GACb;EACDiC,IAAIA,CAAA;IACF,OAAO3B,aAAa,CAAC,IAAI,EAAE4E,SAAS,CAAC;EACvC,CAAC;EACDC,MAAMA,CAEJC,IAAY,EACZd,OAA+D,EAC/DT,OAAwE;IAExE,MAAMwB,QAAQ,GAAG,IAAI,CAACC,KAAK,CAACC,SAAS,CAACH,IAAI,CAAC;IAC3C,OAAOI,YAAY,CAAC;MAClBF,KAAK,EAAE,IAAI,CAACA,KAAK;MACjBG,QAAQ,EAAE/F,KAAK,CAACgG,MAAM,CAAC,IAAI,CAACD,QAAQ,EAAE;QACpCJ,QAAQ;QACRf,OAAO;QACPqB,eAAe,EAAE,KAAK;QACtBC,eAAe,EAAE/B,OAAO,EAAE+B,eAAe,IAAI;OAC9C;KACF,CAAC;EACJ,CAAC;EACDC,SAASA,CAEPT,IAAY,EACZd,OAA+D,EAC/DT,OAAwE;IAExE,MAAMwB,QAAQ,GAAG,IAAI,CAACC,KAAK,CAACC,SAAS,CAACH,IAAI,CAAC;IAC3C,OAAOI,YAAY,CAAC;MAClBF,KAAK,EAAE,IAAI,CAACA,KAAK;MACjBG,QAAQ,EAAE/F,KAAK,CAACgG,MAAM,CAAC,IAAI,CAACD,QAAQ,EAAE;QACpCJ,QAAQ;QACRf,OAAO;QACPqB,eAAe,EAAE,IAAI;QACrBC,eAAe,EAAE/B,OAAO,EAAE+B,eAAe,IAAI;OAC9C;KACF,CAAC;EACJ;CACD;AAED,MAAMJ,YAAY,GAChB3B,OAGC,IACsC;EACvC,MAAMiC,IAAI,GAAGC,MAAM,CAACC,MAAM,CAAChB,aAAa,CAAC;EACzCc,IAAI,CAACR,KAAK,GAAGzB,OAAO,CAACyB,KAAK;EAC1BQ,IAAI,CAACL,QAAQ,GAAG5B,OAAO,CAAC4B,QAAQ;EAChC,OAAOK,IAAI;AACb,CAAC;AAED;;;;;;;;;;;AAWA,OAAO,MAAMR,KAAK,GAAGA,CAQnB7D,GAAmD,EACnDwE,SAAe,EACfC,KAEoC,KAUpC3E,MAAM,CAAC4E,GAAG,CAAExD,MAAM,IAChB/C,MAAM,CAAC4C,GAAG,CAAC,aAAS;EAClB,MAAMX,OAAO,GAAG,OAAOjC,MAAM,CAACiC,OAAO,EAAO;EAC5C,MAAMyD,KAAK,GAAG7D,GAAG,CAAC2E,MAAM,CAACH,SAAS,CAAE;EACpC,MAAMI,MAAM,GAAGH,KAAK,CAACV,YAAY,CAAC;IAAEF,KAAK;IAAEG,QAAQ,EAAE/F,KAAK,CAAC4G,KAAK;EAAE,CAAE,CAAC,CAAC;EACtE,MAAMb,QAAQ,GAA4B7F,MAAM,CAAC2G,QAAQ,CAACF,MAAM,CAAC,GAC5D,OAAOA,MAAsC,GAC9CA,MAAM;EACV,MAAMG,eAAe,GAAG/D,iBAAiB,CAAE6C,KAAa,CAAC5C,WAAW,EAAEb,OAAO,CAAC;EAC9E,MAAM4E,MAAM,GAAsC,EAAE;EACpD,KAAK,MAAMC,IAAI,IAAIjB,QAAQ,CAACA,QAAQ,EAAE;IACpC,MAAM1D,UAAU,GAAGU,iBAAiB,CAAEiE,IAAY,CAACrB,QAAQ,CAAC3C,WAAW,EAAEb,OAAO,EAAE2E,eAAe,CAAC;IAClGC,MAAM,CAACE,IAAI,CAACC,cAAc,CACxBF,IAAI,CAACrB,QAAQ,EACbtD,UAAU,EACV,UAAS0C,OAAO;MACd,OAAO7E,MAAM,CAACiH,eAAe,CAC3BH,IAAI,CAACpC,OAAO,CAACG,OAAO,CAAC,EACpBqC,KAAK,IAAKnH,OAAO,CAACoH,KAAK,CAAClF,OAAO,EAAEiF,KAAK,CAAC,CACzC;IACH,CAAC,EACDJ,IAAI,CAACf,eAAe,EACpBe,IAAI,CAACd,eAAe,CACrB,CAAC;EACJ;EACA,OAAOjD,MAAM,CAACqE,MAAM,CAAC/F,UAAU,CAACgG,YAAY,CAACR,MAAM,CAAC,CAAC;AACvD,CAAC,CAAC,CACI;AAEV;;;;;;AAMA,OAAO,MAAMnC,OAAO,GAAGA,CASrB4C,IAAoD,EACpDC,UAAqB,EACrBC,KAAW,EACXC,CAMC,KAOEA,CAAC;AAEN;AAEA,MAAMC,cAAc,GAAGA,CACrB7C,OAA4C,EAC5C8C,SAAyD,KAOvD;EACF,IAAI,CAACxG,UAAU,CAACyG,OAAO,CAAC/C,OAAO,CAACgD,MAAM,CAAC,EAAE;IACvC,OAAO7H,MAAM,CAAC+D,OAAO,CAAC4D,SAAS,CAAC;EAClC;EACA,MAAMG,WAAW,GAAGjD,OAAO,CAACkD,OAAO,CAAC,cAAc,CAAC,GAC/ClD,OAAO,CAACkD,OAAO,CAAC,cAAc,CAAC,CAACC,WAAW,EAAE,CAACC,IAAI,EAAE,GACpD,kBAAkB;EACtB,IAAIH,WAAW,CAACI,QAAQ,CAAC,kBAAkB,CAAC,EAAE;IAC5C,OAAOlI,MAAM,CAACmI,KAAK,CAACtD,OAAO,CAACuD,IAAI,CAAC;EACnC,CAAC,MAAM,IAAIN,WAAW,CAACI,QAAQ,CAAC,qBAAqB,CAAC,EAAE;IACtD,OAAOlI,MAAM,CAACmI,KAAK,CAACtD,OAAO,CAACwD,SAAS,CAAC;EACxC,CAAC,MAAM,IAAIP,WAAW,CAACI,QAAQ,CAAC,uBAAuB,CAAC,EAAE;IACxD,OAAOlI,MAAM,CAACgC,GAAG,CAAChC,MAAM,CAACmI,KAAK,CAACtD,OAAO,CAACyD,aAAa,CAAC,EAAE5G,SAAS,CAAC6G,QAAQ,CAAC;EAC5E,CAAC,MAAM,IAAIT,WAAW,CAACU,UAAU,CAAC,OAAO,CAAC,EAAE;IAC1C,OAAOxI,MAAM,CAACmI,KAAK,CAACtD,OAAO,CAAC4D,IAAI,CAAC;EACnC;EACA,OAAOzI,MAAM,CAACgC,GAAG,CAAChC,MAAM,CAACmI,KAAK,CAACtD,OAAO,CAAC6D,WAAW,CAAC,EAAGC,MAAM,IAAK,IAAIC,UAAU,CAACD,MAAM,CAAC,CAAC;AAC1F,CAAC;AAOD,MAAM9F,iBAAiB,GAAGA,CACxBV,UAAsD,EACtDF,OAA+B,EAC/B4G,OAAuB,KACN;EACjB,MAAM7G,GAAG,GAAG,IAAI8G,GAAG,CAGhBD,OAAO,CAAC;EACX1G,UAAU,CAAC4G,OAAO,CAAEC,GAAG,IAAI;IACzBhH,GAAG,CAACiH,GAAG,CAACD,GAAG,CAACE,GAAG,EAAE;MACfF,GAAG;MACHlH,MAAM,EAAE/B,OAAO,CAACoJ,SAAS,CAAClH,OAAO,EAAE+G,GAAU;KAC9C,CAAC;EACJ,CAAC,CAAC;EACF,OAAOhH,GAAG;AACZ,CAAC;AAED,SAASoH,kBAAkBA,CAACC,GAAY,EAAEH,GAAiB;EACzD,QAAQG,GAAG,CAACC,IAAI;IACd,KAAK,eAAe;IACpB,KAAK,SAAS;IACd,KAAK,iBAAiB;IACtB,KAAK,OAAO;MACV,OAAO,IAAI;IACb,KAAK,aAAa;MAAE;QAClB,IAAIJ,GAAG,KAAKpE,SAAS,EAAE;UACrB,MAAMyE,EAAE,GAAGF,GAAG,CAACG,kBAAkB,CAACC,IAAI,CAAEF,EAAE,IAAKA,EAAE,CAAC/D,IAAI,KAAK0D,GAAG,CAAC;UAC/D,OAAOK,EAAE,KAAKzE,SAAS,GACnBsE,kBAAkB,CAACG,EAAE,CAACG,IAAI,EAAER,GAAG,CAAC,GAChCG,GAAG,CAACM,eAAe,CAACC,IAAI,CAAEC,EAAE,IAAKjJ,MAAM,CAACiJ,EAAE,CAACjJ,MAAM,CAACuD,IAAI,CAAC0F,EAAE,CAACC,SAAS,CAAC,CAAC,CAACZ,GAAG,CAAC,IAAIE,kBAAkB,CAACS,EAAE,CAACH,IAAI,CAAC,CAAC;QAChH;QACA,OAAO,KAAK;MACd;IACA,KAAK,OAAO;MACV,OAAOL,GAAG,CAACU,KAAK,CAACH,IAAI,CAAEF,IAAI,IAAKN,kBAAkB,CAACM,IAAI,EAAER,GAAG,CAAC,CAAC;IAChE,KAAK,SAAS;MACZ,OAAOE,kBAAkB,CAACC,GAAG,CAAC5B,CAAC,EAAE,EAAEyB,GAAG,CAAC;IACzC,KAAK,YAAY;IACjB,KAAK,gBAAgB;MACnB,OAAOE,kBAAkB,CAACC,GAAG,CAACW,IAAI,EAAEd,GAAG,CAAC;EAC5C;EACA,OAAO,KAAK;AACd;AAEA;;;;;;AAMA,OAAM,SAAUe,kBAAkBA,CAChCC,MAAsD,EACtDb,GAAY;EAEZ,MAAMc,GAAG,GAA2C,EAAE;EACtD,KAAK,MAAMjB,GAAG,IAAIgB,MAAM,EAAE;IACxB,MAAME,KAAK,GAAGF,MAAM,CAAChB,GAAG,CAAC;IACzBiB,GAAG,CAACjB,GAAG,CAAC,GAAGmB,KAAK,CAACC,OAAO,CAACF,KAAK,CAAC,IAAIhB,kBAAkB,CAACC,GAAG,EAAEH,GAAG,CAAC,GAAGkB,KAAK,GAAG,CAACA,KAAK,CAAC;EACnF;EACA,OAAOD,GAAG;AACZ;AAEA,MAAMnD,cAAc,GAAGA,CACrBuD,SAA8C,EAC9CpI,UAAyB,EACzBuC,OAA+D,EAC/D8F,aAAsB,EACtBxE,eAAwB,KACM;EAC9B,MAAMP,QAAQ,GAAG8E,SAAyD;EAC1E,MAAME,iBAAiB,GAAGhF,QAAQ,CAACiF,aAAa,CAACrI,IAAI,CACnD7B,MAAM,CAACwB,GAAG,CAAC,CAAC;IAAEqH;EAAG,CAAE,KAAKpI,aAAa,CAAC0J,kBAAkB,CAACtB,GAAG,CAAC,CAAC,EAC9D7I,MAAM,CAACoK,SAAS,CAACzK,UAAU,CAAC,CAC7B;EACD,MAAM0K,UAAU,GAAGrK,MAAM,CAACwB,GAAG,CAACyD,QAAQ,CAACqF,UAAU,EAAElK,MAAM,CAACmK,aAAa,CAAC;EACxE,MAAMC,aAAa,GAAGR,aAAa,IAAIC,iBAAiB,GACpDjK,MAAM,CAACyK,IAAI,EAAE,GACbzK,MAAM,CAACwB,GAAG,CAACyD,QAAQ,CAACiF,aAAa,EAAE9J,MAAM,CAACmK,aAAa,CAAC;EAC5D,MAAMG,aAAa,GAAG1K,MAAM,CAACwB,GAAG,CAACyD,QAAQ,CAAC0F,aAAa,EAAEvK,MAAM,CAACmK,aAAa,CAAC;EAC9E,MAAMK,aAAa,GAAGxK,MAAM,CAACyK,MAAM,CAACC,iBAAiB,CAAC7F,QAAQ,CAAC8F,aAAa,CAAC,CAAC;EAC9E,OAAOlK,UAAU,CAACmK,SAAS,CACzB/F,QAAQ,CAACoC,MAAM,EACfpC,QAAQ,CAACgG,IAAI,EACbzI,eAAe,CACbb,UAAU,EACVnC,MAAM,CAAC4C,GAAG,CAAC,aAAS;IAClB,MAAM8I,KAAK,GAAGlL,MAAM,CAACmL,UAAU,CAACzL,KAAK,CAAC0L,eAAe,EAAE,CAAC;IACxD,MAAM3J,OAAO,GAAGyJ,KAAK,CAACG,cAAc;IACpC,MAAMC,WAAW,GAAG/L,OAAO,CAACoJ,SAAS,CAAClH,OAAO,EAAEV,iBAAiB,CAACA,iBAAiB,CAAC;IACnF,MAAMwK,YAAY,GAAGhM,OAAO,CAACoJ,SAAS,CAAClH,OAAO,EAAEZ,UAAU,CAAC2K,YAAY,CAAC;IACxE,MAAMrE,SAAS,GAAG5H,OAAO,CAACoJ,SAAS,CAAClH,OAAO,EAAEV,iBAAiB,CAAC0K,kBAAkB,CAAC;IAClF,MAAMpH,OAAO,GAAQ;MAAEA,OAAO,EAAEiH;IAAW,CAAE;IAC7C,IAAIjB,UAAU,CAACvB,IAAI,KAAK,MAAM,EAAE;MAC9BzE,OAAO,CAAC4G,IAAI,GAAG,OAAOZ,UAAU,CAACT,KAAK,CAAC2B,YAAY,CAAC7B,MAAM,CAAC;IAC7D;IACA,IAAIc,aAAa,CAAC1B,IAAI,KAAK,MAAM,EAAE;MACjCzE,OAAO,CAACqH,OAAO,GAAG,OAAOlM,MAAM,CAACmM,OAAO,CACrCzE,cAAc,CAACoE,WAAW,EAAEnE,SAAS,CAAC,EACtCqD,aAAa,CAACZ,KAAK,CACpB;IACH,CAAC,MAAM,IAAIK,iBAAiB,EAAE;MAC5B5F,OAAO,CAACqH,OAAO,GAAGJ,WAAW,CAACM,eAAe;IAC/C;IACA,IAAIlB,aAAa,CAAC5B,IAAI,KAAK,MAAM,EAAE;MACjCzE,OAAO,CAACkD,OAAO,GAAG,OAAOmD,aAAa,CAACd,KAAK,CAAC0B,WAAW,CAAC/D,OAAO,CAAC;IACnE;IACA,IAAItC,QAAQ,CAAC4G,eAAe,CAAC/C,IAAI,KAAK,MAAM,EAAE;MAC5C,MAAMgD,MAAM,GAAG7G,QAAQ,CAAC4G,eAAe,CAACjC,KAAK;MAC7CvF,OAAO,CAAC8C,SAAS,GAAG,OAAO/G,MAAM,CAACmK,aAAa,CAACuB,MAAM,CAAC,CAACrC,kBAAkB,CAACtC,SAAS,EAAE2E,MAAM,CAACjD,GAAG,CAAC,CAAC;IACpG;IACA,MAAMkD,QAAQ,GAAG,OAAO7H,OAAO,CAACG,OAAO,CAAC;IACxC,OAAOrD,kBAAkB,CAACgL,gBAAgB,CAACD,QAAQ,CAAC,GAAGA,QAAQ,GAAG,OAAOnB,aAAa,CAACmB,QAAQ,CAAC;EAClG,CAAC,CAAC,CAAClK,IAAI,CACLrC,MAAM,CAACyM,OAAO,CAAChM,WAAW,CAACiM,YAAY,EAAE3L,kBAAkB,CAAC4L,gBAAgB,CAAC,CAC9E,CACF,EACD;IAAE3G;EAAe,CAAE,CACpB;AACH,CAAC;AAED,MAAMhD,eAAe,GAAGA,CACtBb,UAAyB,EACzBuC,OAAU,KACR;EACF,KAAK,MAAMkI,KAAK,IAAIzK,UAAU,CAAC0K,MAAM,EAAE,EAAE;IACvC,MAAM/K,MAAM,GAAGd,iBAAiB,CAAC8L,cAAc,IAAIF,KAAK,CAAC5D,GAAG,GAAG+D,sBAAsB,CAACH,KAAY,CAAC,GAAGA,KAAK,CAAC9K,MAAM;IAClH,IAAI8K,KAAK,CAAC5D,GAAG,CAACgE,QAAQ,EAAE;MACtB,MAAMC,QAAQ,GAAGvI,OAAO;MACxBA,OAAO,GAAG1E,MAAM,CAAC0D,WAAW,CAAC5B,MAAM,EAAE;QACnC8B,SAAS,EAAEA,CAAA,KAAMqJ,QAAQ;QACzBnJ,SAAS,EAAE8I,KAAK,CAAC5D,GAAG,CAACkE,QAAQ,KAAKpI,SAAS,GACtCsF,KAAK,IAAKpK,MAAM,CAACmN,cAAc,CAACF,QAAQ,EAAEL,KAAK,CAAC5D,GAAG,CAACkE,QAAe,EAAE9C,KAAK,CAAC,GAC3EgD,CAAC,IAAKH;OACZ,CAAQ;IACX,CAAC,MAAM;MACLvI,OAAO,GAAGkI,KAAK,CAAC5D,GAAG,CAACkE,QAAQ,KAAKpI,SAAS,GACtC9E,MAAM,CAACqN,oBAAoB,CAAC3I,OAAO,EAAEkI,KAAK,CAAC5D,GAAG,CAACkE,QAAe,EAAEpL,MAAM,CAAQ,GAC9E9B,MAAM,CAACsN,QAAQ,CAACxL,MAAM,EAAE4C,OAAO,CAAQ;IAC7C;EACF;EACA,OAAOA,OAAO;AAChB,CAAC;AAED,MAAM6I,uBAAuB,gBAAGlN,WAAW,CACzC,yBAAyB,EACzB,MAAM,IAAImN,OAAO,EAAE,CACpB;AAED,MAAMT,sBAAsB,GAC1BH,KAGC,IAC+B;EAChC,IAAIW,uBAAuB,CAACE,GAAG,CAACb,KAAK,CAAC,EAAE;IACtC,OAAOW,uBAAuB,CAACG,GAAG,CAACd,KAAK,CAAE;EAC5C;EAEA,IAAI9K,MAAgD;EACpD,KAAK,MAAM,CAACoH,GAAG,EAAEyE,QAAQ,CAAC,IAAIxH,MAAM,CAACyH,OAAO,CAAChB,KAAK,CAAC5D,GAAG,CAAC2E,QAAQ,CAAC,EAAE;IAChE,MAAME,MAAM,GAAGC,cAAc,CAACH,QAAQ,CAAC;IACvC,MAAMjJ,OAAO,GAAGkI,KAAK,CAAC9K,MAAM,CAACoH,GAAG,CAAC;IACjC,MAAM/G,UAAU,GAAGnC,MAAM,CAACmM,OAAO,CAAC0B,MAAM,EAAEnJ,OAAO,CAAC;IAClD5C,MAAM,GAAGA,MAAM,KAAKgD,SAAS,GAAG3C,UAAU,GAAGnC,MAAM,CAAC+N,QAAQ,CAACjM,MAAM,EAAE,MAAMK,UAAU,CAAC;EACxF;EACA,IAAIL,MAAM,KAAKgD,SAAS,EAAE;IACxBhD,MAAM,GAAG9B,MAAM,CAACgO,IAAI;EACtB;EACAT,uBAAuB,CAACtE,GAAG,CAAC2D,KAAK,EAAE9K,MAAM,CAAC;EAC1C,OAAOA,MAAM;AACf,CAAC;AAED,MAAMmM,cAAc,gBAAGrN,MAAM,CAACsN,OAAO,CAAC1M,kBAAkB,CAACgL,gBAAgB,CAAC;AAE1E,MAAMlB,iBAAiB,GACrBgB,MAAyB,IACwC;EACjE,MAAM6B,OAAO,GAAG,IAAIC,GAAG,EAAqB;EAC5CnN,aAAa,CAACoN,UAAU,CAACF,OAAO,EAAE7B,MAAM,CAAC;EACzC,OAAO1L,MAAM,CAAC0N,KAAK,CAAC,GAAGjE,KAAK,CAACL,IAAI,CAACmE,OAAO,EAAEI,iBAAiB,CAAC,CAAQ;AACvE,CAAC;AAED,MAAMlL,eAAe,GACnBxB,GAAiC,IACgC;EACjE,MAAMsM,OAAO,GAAG,IAAIC,GAAG,EAAqB;EAC5CnN,aAAa,CAACoN,UAAU,CAACF,OAAO,EAAEtM,GAAG,CAACuB,WAAW,CAAC;EAClD,KAAK,MAAMsC,KAAK,IAAIS,MAAM,CAAC0G,MAAM,CAAChL,GAAG,CAAC2E,MAAM,CAAC,EAAE;IAC7C,KAAK,MAAMf,QAAQ,IAAIU,MAAM,CAAC0G,MAAM,CAACnH,KAAK,CAACC,SAAS,CAAC,EAAE;MACrD1E,aAAa,CAACoN,UAAU,CAACF,OAAO,EAAE1I,QAAQ,CAACrC,WAAW,CAAC;IACzD;IACAnC,aAAa,CAACoN,UAAU,CAACF,OAAO,EAAEzI,KAAK,CAACtC,WAAW,CAAC;EACtD;EACA,OAAOxC,MAAM,CAAC0N,KAAK,CAAC,GAAGjE,KAAK,CAACL,IAAI,CAACmE,OAAO,EAAEK,eAAe,CAAC,CAAQ;AACrE,CAAC;AAED,MAAMC,eAAe,GAAGA,CAAIrB,CAAI,EAAEsB,EAAoB,EAAErF,GAAuB,KAC7E5I,WAAW,CAACkO,IAAI,CAAC,IAAIlO,WAAW,CAACmO,SAAS,CAACvF,GAAG,EAAE+D,CAAC,EAAE,oBAAoB,CAAC,CAAC;AAE3E,MAAMyB,gBAAgB,GAAIC,SAAmC,IAAI;EAC/D,MAAMC,KAAK,GAAG,IAAIvB,OAAO,EAA8B;EACvD,MAAMwB,gBAAgB,GAAGA,CACvBC,IAAS,EACT7B,CAAmB,EACnB/D,GAAuB,KACyD;IAChF,MAAM6F,OAAO,GAAGjO,aAAa,CAACkO,MAAM,CAAC9F,GAAG,CAAC+F,EAAE,CAAC;IAC5C,MAAMC,MAAM,GAAGP,SAAS,CAACzF,GAAG,CAAC+F,EAAE,CAAC;IAChC,IAAIF,OAAO,EAAE;MACX,OAAO1N,kBAAkB,CAACkF,KAAK,CAAC;QAAE2I;MAAM,CAAE,CAAC;IAC7C;IACA,MAAMC,QAAQ,GAAGrO,aAAa,CAACsO,WAAW,CAAClG,GAAG,CAAC+F,EAAE,CAAC;IAClD,QAAQE,QAAQ,CAACE,IAAI;MACnB,KAAK,MAAM;QAAE;UACX,OAAOxP,MAAM,CAACyP,QAAQ,CACpBjO,kBAAkB,CAAC4G,IAAI,CAAC6G,IAAI,EAAE;YAC5BI,MAAM;YACNvH,WAAW,EAAEwH,QAAQ,CAACxH;WACvB,CAAC,EACD4H,KAAK,IAAK,IAAIjP,WAAW,CAACkP,IAAI,CAACtG,GAAG,EAAEqG,KAAK,EAAE,0BAA0B,CAAC,CACxE;QACH;MACA,KAAK,MAAM;QAAE;UACX,OAAOjP,WAAW,CAACsD,OAAO,CAACvC,kBAAkB,CAACiH,IAAI,CAACwG,IAAW,EAAE;YAC9DI,MAAM;YACNvH,WAAW,EAAEwH,QAAQ,CAACxH;WACvB,CAAC,CAAC;QACL;MACA,KAAK,YAAY;QAAE;UACjB,OAAOrH,WAAW,CAACsD,OAAO,CAACvC,kBAAkB,CAACoO,UAAU,CAACX,IAAW,EAAE;YACpEI,MAAM;YACNvH,WAAW,EAAEwH,QAAQ,CAACxH;WACvB,CAAC,CAAC;QACL;MACA,KAAK,WAAW;QAAE;UAChB,OAAOrH,WAAW,CAACsD,OAAO,CAACvC,kBAAkB,CAACmG,SAAS,CAACsH,IAAW,EAAE;YACnEI,MAAM;YACNvH,WAAW,EAAEwH,QAAQ,CAACxH;WACvB,CAAC,CAAC;QACL;IACF;EACF,CAAC;EACD,OAAiBwE,MAA8B,IAAgE;IAC7G,IAAIyC,KAAK,CAACtB,GAAG,CAACnB,MAAM,CAACjD,GAAG,CAAC,EAAE;MACzB,OAAO0F,KAAK,CAACrB,GAAG,CAACpB,MAAM,CAACjD,GAAG,CAAS;IACtC;IACA,MAAMwG,SAAS,GAAGjP,MAAM,CAACkP,eAAe,CAAC7B,cAAc,EAAE3B,MAAM,EAAE;MAC/DuB,MAAM,EAAEY,eAAe;MACvBpD,MAAM,EAAE2D;KACT,CAAC;IACFD,KAAK,CAAC9F,GAAG,CAAC4G,SAAS,CAACxG,GAAG,EAAEwG,SAAS,CAAC;IACnC,OAAOA,SAAS;EAClB,CAAC;AACH,CAAC;AAED,MAAMtB,iBAAiB,gBAAGM,gBAAgB,CAAC5N,aAAa,CAAC8O,mBAAmB,CAAC;AAC7E,MAAMvB,eAAe,gBAAGK,gBAAgB,CAAC5N,aAAa,CAAC+O,iBAAiB,CAAC;AAEzE;AACA;AACA;AAEA;;;;AAIA,OAAM,MAAOtN,UAAW,sBAAQ3C,OAAO,CAAC6B,GAAG,CAAC,4CAA4C,CAAC,EAMtF;EACD;;;EAGA,OAAgBe,KAAK,gBAAGrC,KAAK,CAAC2P,IAAI,CAACvN,UAAU,EAAE,MAAK;IAClD,IAAIP,UAAU,GAAkC/B,QAAQ;IACxD,OAAOsC,UAAU,CAACwN,EAAE,CAAC;MACnBC,GAAG,EAAG1I,CAAC,IACLzH,MAAM,CAACiQ,IAAI,CAAC,MAAK;QACf,MAAMG,IAAI,GAAGjO,UAAU;QACvBA,UAAU,GAAIG,GAAG,IAAKmF,CAAC,CAAC2I,IAAI,CAAC9N,GAAG,CAAC,CAAC;MACpC,CAAC,CAAC;MACJa,QAAQ,EAAEnD,MAAM,CAACiQ,IAAI,CAAC,MAAM9N,UAAU;KACvC,CAAC;EACJ,CAAC,CAAC;;AAWJ,MAAMkO,aAAa,GACjBlO,UAAyC,IAEzCnC,MAAM,CAAC4C,GAAG,CAAC,aAAS;EAClB,MAAMX,OAAO,GAAG,OAAOjC,MAAM,CAACiC,OAAO,EAAS;EAC9C,MAAMqO,OAAO,GAAG,OAAO5N,UAAU;EACjC,OAAO4N,OAAO,CAACH,GAAG,CAAE/N,OAAO,IACzBpC,MAAM,CAACiH,eAAe,CAAC9E,UAAU,CAACC,OAAO,CAAC,EAAG8E,KAAK,IAAKnH,OAAO,CAACoH,KAAK,CAAClF,OAAO,EAAEiF,KAAK,CAAC,CAAC,CACtF;AACH,CAAC,CAAC;AAEJ,MAAMqJ,sBAAsB,GAC1BpO,UAAyC,IAEzCnC,MAAM,CAAC4C,GAAG,CAAC,aAAS;EAClB,MAAM0N,OAAO,GAAG,OAAO5N,UAAU;EACjC,OAAO4N,OAAO,CAACH,GAAG,CAAChO,UAAU,CAAC;AAChC,CAAC,CAAC;AAEJ;;;;;;AAMA,OAAO,MAAMA,UAAU,GAmDnBA,CACF,GAAGqO,IAWF,KACM;EACP,MAAMC,QAAQ,GAAG3P,OAAO,CAAC4P,SAAS,CAACF,IAAI,CAAC,CAAC,CAAC,CAAC;EAC3C,MAAMG,WAAW,GAAGF,QAAQ,GAAGD,IAAI,CAAC,CAAC,CAAC,EAAEG,WAAW,KAAK,IAAI,GAAIH,IAAY,CAAC,CAAC,CAAC,EAAEG,WAAW,KAAK,IAAI;EACrG,MAAMR,GAAG,GAAGQ,WAAW,GAAGN,aAAa,GAAGE,sBAAsB;EAChE,MAAMpO,UAAU,GAAGsO,QAAQ,GAAGD,IAAI,CAAC,CAAC,CAAC,GAAGA,IAAI,CAAC,CAAC,CAAC;EAC/C,OAAO,CAACxQ,MAAM,CAAC2G,QAAQ,CAACxE,UAAU,CAAC,GAC/B7B,KAAK,CAACsQ,aAAa,CAAC5Q,MAAM,CAACmM,OAAO,CAAChK,UAAiB,EAAEgO,GAAG,CAAC,CAAC,GAC3D7P,KAAK,CAACsQ,aAAa,CAACT,GAAG,CAAChO,UAAiB,CAAC,CAAC,EAAEE,IAAI,CAAC/B,KAAK,CAACkC,OAAO,CAACE,UAAU,CAACC,KAAK,CAAC,CAAC;AACxF,CAAC;AAED;;;;;;AAMA,OAAO,MAAMkO,cAAc,GACzB5M,OAOa,IACU9B,UAAU,CAACf,cAAc,CAAC0P,IAAI,CAAC7M,OAAO,CAAC,CAAC;AAEjE;;;;;;AAMA,OAAO,MAAM8M,iBAAiB,GAC5B9M,OAGa,IAEbtC,MAAM,CAAC4E,GAAG,CAAExD,MAAM,IAChB/C,MAAM,CAAC4C,GAAG,CAAC,aAAS;EAClB,MAAM;IAAEf;EAAG,CAAE,GAAG,OAAOf,OAAO,CAACiB,GAAG;EAClC,MAAMiP,IAAI,GAAGvP,OAAO,CAACwP,OAAO,CAACpP,GAAG,EAAE;IAChCqP,4BAA4B,EAAEjN,OAAO,EAAEiN;GACxC,CAAC;EACF,MAAM3E,QAAQ,GAAG,OAAO/K,kBAAkB,CAAC4G,IAAI,CAAC4I,IAAI,CAAC,CAAC3O,IAAI,CACxDrC,MAAM,CAACmI,KAAK,CACb;EACD,OAAOpF,MAAM,CAAC2K,GAAG,CAACzJ,OAAO,EAAEwH,IAAI,IAAI,eAAe,EAAEzL,MAAM,CAAC+D,OAAO,CAACwI,QAAQ,CAAC,CAAC;AAC/E,CAAC,CAAC,CACH;AAEH,MAAM4E,SAAS,GAAG,SAAS,CAACC,MAAM;AAClC,MAAMC,QAAQ,GAAG,QAAQ,CAACD,MAAM;AAEhC;;;;AAIA,OAAO,MAAMtD,cAAc,GACzB5H,IAAc,IAKZ;EACF,QAAQA,IAAI,CAACoD,IAAI;IACf,KAAK,QAAQ;MAAE;QACb,OAAOtJ,MAAM,CAACgC,GAAG,CACfT,iBAAiB,CAACA,iBAAiB,EAClCsD,OAAO,IAAKlE,QAAQ,CAACwD,IAAI,CAAC,CAACU,OAAO,CAACkD,OAAO,CAACuJ,aAAa,IAAI,EAAE,EAAEC,KAAK,CAACJ,SAAS,CAAC,CAAQ,CAC1F;MACH;IACA,KAAK,QAAQ;MAAE;QACb,MAAMjI,GAAG,GAAGhD,IAAI,CAACsL,EAAE,KAAK,QAAQ,GAAGtL,IAAI,CAACgD,GAAG,CAAClB,WAAW,EAAE,GAAG9B,IAAI,CAACgD,GAAG;QACpE,MAAMoD,MAAM,GAAG1L,MAAM,CAAC6Q,MAAM,CAAC;UAC3B,CAACvI,GAAG,GAAGtI,MAAM,CAAC8Q;SACf,CAAC;QACF,MAAM7D,MAAM,GAAGhN,KAAK,CAClBqF,IAAI,CAACsL,EAAE,KAAK,OAAO,GACfjQ,iBAAiB,CAACoQ,kBAAkB,CAACrF,MAAM,CAAC,GAC5CpG,IAAI,CAACsL,EAAE,KAAK,QAAQ,GACpBjQ,iBAAiB,CAACqQ,aAAa,CAACtF,MAAM,CAAC,GACvC/K,iBAAiB,CAACsQ,aAAa,CAACvF,MAAM,CAAC,CAC5C;QACD,OAAOtM,MAAM,CAAC8R,KAAK,CAACjE,MAAM,EAAE;UAC1BjK,SAAS,EAAEA,CAAA,KAAMjD,QAAQ,CAACwD,IAAI,CAAC,EAAE,CAAQ;UACzCL,SAAS,EAAGgO,KAAK,IAAKnR,QAAQ,CAACwD,IAAI,CAAC2N,KAAK,CAAC5I,GAAG,CAAC;SAC/C,CAAC;MACJ;IACA,KAAK,OAAO;MAAE;QACZ,MAAMxC,KAAK,GAAmD;UAC5DqL,QAAQ,EAAE,EAAE;UACZC,QAAQ,EAAErR,QAAQ,CAACwD,IAAI,CAAC,EAAE;SACpB;QACR,OAAO5C,iBAAiB,CAACA,iBAAiB,CAACc,IAAI,CAC7CrC,MAAM,CAACmM,OAAO,CAAEtH,OAAO,IAAK5E,QAAQ,CAACgS,kBAAkB,CAAC,CAACpN,OAAO,CAACkD,OAAO,CAACuJ,aAAa,IAAI,EAAE,EAAEC,KAAK,CAACF,QAAQ,CAAC,CAAC,CAAC,EAC/GrR,MAAM,CAAC8R,KAAK,CAAC;UACXlO,SAAS,EAAEA,CAAA,KAAM8C,KAAK;UACtB5C,SAAS,EAAGoO,MAAM,IAAI;YACpB,MAAMC,KAAK,GAAGD,MAAM,CAACE,KAAK,CAAC,GAAG,CAAC;YAC/B,IAAID,KAAK,CAACf,MAAM,KAAK,CAAC,EAAE;cACtB,OAAO1K,KAAK;YACd;YACA,OAAO;cACLqL,QAAQ,EAAEI,KAAK,CAAC,CAAC,CAAC;cAClBH,QAAQ,EAAErR,QAAQ,CAACwD,IAAI,CAACgO,KAAK,CAAC,CAAC,CAAC;aAC1B;UACV;SACD,CAAC,CACH;MACH;EACF;AACF,CAAC;AAED;;;;;;;;;;;;;;;AAeA,OAAO,MAAME,iBAAiB,GAAGA,CAC/BnM,IAA4B,EAC5BkE,KAAiC,EACjCnG,OAA2B,KACJ;EACvB,MAAMqO,WAAW,GAAG,OAAOlI,KAAK,KAAK,QAAQ,GAAGA,KAAK,GAAGzJ,QAAQ,CAACyJ,KAAK,CAACA,KAAK,CAAC;EAC7E,OAAOlJ,OAAO,CAACqR,wBAAwB,CAAC,CAACC,IAAI,EAAEjG,QAAQ,KACrDvM,MAAM,CAACmI,KAAK,CACV3G,kBAAkB,CAACiR,SAAS,CAAClG,QAAQ,EAAErG,IAAI,CAACgD,GAAG,EAAEoJ,WAAW,EAAE;IAC5DI,MAAM,EAAE,IAAI;IACZC,QAAQ,EAAE,IAAI;IACd,GAAG1O;GACJ,CAAC,CACH,CACF;AACH,CAAC","ignoreList":[]}